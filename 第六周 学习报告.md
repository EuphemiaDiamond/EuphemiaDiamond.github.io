## 第六周 学习报告

**混淆电路**

混淆电路(Garbled Circuit)是姚期智教授[4]在80年代提出的安全计算概念。通过布尔电路的观点构造安全函数计算，达到参与者可以针对某个数值来计算答案，而不需要知道他们在计算式中输入的具体数字。

在这里关键词是“电路”，实际上所有可计算问题都可以转换为各个不同的电路，例如加法电路，比较电路，乘法电路等。而电路是由一个个门（gate）组成，例如与门，非门，或门，与非门等。

混淆电路里的多方的共同计算是通过电路的方式来实现，例如下图所示，Alice和Bob要进行多方计算，他们首先需要构建一个由与门，或门，非门，与非门组成的布尔逻辑电路，每个门都包括输入线，输出线。

![img](https://img-blog.csdnimg.cn/20191231155846636.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hlbGxvbXBj,size_16,color_FFFFFF,t_70)

混淆电路则通过加密和扰乱这些电路的值来掩盖信息，而这些加密和扰乱是以门为单位，每个门都有一张真值表。

Alice用密钥加密真值表，并把表打乱后发给Bob，通过这种这加密+打乱的过程，达到混淆电路的目的。而Bob在接收到加密表后，根据收到的加密真值表，混淆的输入，及自己的Key，对加密真值表的每一行尝试解密，最终只有一行能解密成功，并提取相关的加密信息。最后Bob将计算结果返回给Alice。



**零知识证明**(Zero—Knowledge Proof)，指的是证明者能够在不向验证者提供任何有用的信息的情况下，使验证者相信某个论断是正确的。零知识证明实质上是一种涉及两方或更多方的协议，即两方或更多方完成一项任务所需采取的一系列步骤。证明者向验证者证明并使其相信自己知道或拥有某一消息，但证明过程不能向验证者泄漏任何关于被证明消息的信息。大量事实证明，零知识证明在密码学中非常有用。如果能够将零知识证明用于验证，将可以有效解决许多问题。

在有必要证明一个命题是否正确，又不需要提示与这个命题相关的任何信息时，零知识证明系统(也叫做最小泄露证明系统)是不可或缺的。零知识证明系统包括两部分：宣称某一命题为真的示证者(prover)和确认该命题确实为真的验证者(verifier)。证明是通过这两部分之间的交互来执行的。在零知识协议的结尾，验证者只有当命题为真时才会确认。但是，如果示证者宣称一个错误的命题，那么验证者完全可能发现这个错误。这种思想源自[交互式证明系统](https://baike.baidu.com/item/交互式证明系统/6940058)。交互式系统在计算复杂度理论方面已经获得异常独立的地位。



**交互式证明系统**

在[计算复杂性理论](https://baike.baidu.com/item/计算复杂性理论)中，像其它计算模型一样，我们的目标是对一个[语言](https://baike.baidu.com/item/语言)L，和一个给定的输入x，判断x是否在L中。交互式证明体系由两个实体：验证者（verifier）和证明者（prover）组成，两者都可以看作是某类[图灵机](https://baike.baidu.com/item/图灵机)。而它的计算过程为：给定了输入x，通过验证者和证明者之间交换信息，最终，由验证者来根据证明者给出的信息，判断给定的输入是不是在语言L中。

交互证明的基本假设是：证明者在计算能力上是无限的，而验证者一般设为[多项式时间](https://baike.baidu.com/item/多项式时间)的、可使用随机源的图灵机。一般来说，对给定的L，我们关注的是交互证明中验证者V这一角色，并对它加以如下的要求：

**完备性**（completeness）：如果x∈L，那么存在诚实的证明者P，使得V与P的交互之后，输出“x∈L”；

**可靠性**（soundness）：如果x∉L，那么对任意的证明者P，V与P交互之后，输出“x∈L”的概率很小（可以认为小于某一常数）。

如果对L，这样的验证者存在，那么我们说L有这样的一个交互体系。

如何刻画交互式证明系统的零知识性，设交互式证明系统$\sum=(P,V)$用于证明$x\in L$。如果V通过和P交互得到的所有信息都能仅通过x计算得到，这就说明V通过交互没有得到多余的信息。 



**非交互式证明系统**

![image-20210302183329685](C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20210302183329685.png)



**零知识证明协议的组合**

1.顺序组合

零知识证明协议的顺序组合是指将零知识证明协议顺序执行多次。

2.并行组合

![image-20210302190024368](C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20210302190024368.png)

**区块链和零知识证明**

2009年1月3日，比特币网络发行了最初的50个比特币，从此，一个新的时代开始了。随着比特币币值的一路飙升，比特币受到了越来越多的关注，比特币系统中的一些缺陷也获得了越来越多的关注与讨论。缺乏隐私保护是比特币系统的主要缺陷之一，比特币网络中的所有交易以明文的方式记录在区块链上。虽然比特币系统使用的是与身份无关的地址，通过追踪货币在地址之间的流动，依然可以分析出来哪些地址属于同一个用户。

为了解决比特币的隐私保护问题，一系列的解决方案被提出。其中2015年提出的 Zerocash 使用了一种特殊类型的零知识证明工具 zk-SNARKs 实现了对交易金额与交易方的完全隐藏。2017 年，Zerocash 团队提出了将 zk-SNARKs 与智能合约结合的方案[8]，使零知识证明 zk-SNARKs 获得了更高的关注度。越来越多的人在讨论，zk-SNARKs可以为区块链技术解决什么问题？

其实，零知识证明技术就像一个江湖，而 zk-SNARKs 是只是比较著名的门派。而在这个江湖中，还有很多其他的门派，他们风格各异，使用的武器也不尽相同。

从1985年零知识证明被首次提出，到今天已经是重要的密码学基础构件。但是在很长一段时间内，零知识证明协议由于没有较好的运行效率和通用性，只是停留在理论。这些理论的零知识证明协议具有不同的特点。有的协议是专职的，只能证明某些特定的事情，比如，图同构问题。有些零知识证明协议是全能的，只要你能用代码定义的问题，它都能证明（只是理论可行，不意味着有运行效率）。有些协议是交互式的，需要证明者和验证者来回发很多轮消息，有些是非交互式的，证明者只需要根据协议向验证者发一次消息。有的协议证明大小与问题规模相关，问题越复杂，证明越长。而有些协议下，无论问题多复杂，证明大小都一样。而一个全能的，非交互的，常数大小的零知识证明协议，是密码学研究者们多年奋斗的目标。

![preview](https://pic1.zhimg.com/v2-7b8785bffcde18596b1bacf132ff9ac8_r.jpg)

2010年，Groth实现了首个全能的，非交互的，常数大小的零知识证明协议，基于椭圆曲线双线性映射。因区块链而著名的零知识证明协议 SNARKs 便是这一协议的“子孙”。经过不断的优化，2013年，一个叫做 Pinocchio 的协议实现了分钟级别证明，毫秒级别验证，证明大小不到300字节，将零知识证明从理论带到了应用，并获得当年安全顶会 Security & Privacy 的最佳论文奖。Zcash使用的 snarks 正是基于 Pinocchio 的改进版。

混淆电路是设计零知识证明协议的另一个工具。混淆电路是我国唯一图灵奖得主姚期智院士在1982年首次提出的，它允许双方在不泄露隐私的前提下，使用各自的隐私计算一个公开的结果。例如，两个百万富翁不想让对方知道自己有多少资产，但是都希望知道谁的钱比较多。两个企业，一个企业有机器学习的模型，另一个企业有数据，他们不希望让对方知道自己的模型和数据，但是希望共同计算预测结果。2013年，Jawurek等人在前人工作的基础上，将基于混淆电路的零知识证明优化到了毫秒级别证明和验证，3MB 左右的证明长度（证明 SHA2 的计算）。但是这一算法是交互式的，需要证明方和验证方同时在线。这也意味着，这一类证明在区块链上部署会很没有效率。

3年后，这篇论文的作者之一发表了另一个协议，命名为 ZKBoo。这一协议基于一个叫做 MPC-in-the-head 的零知识证明协议设计理念。实现了与上一协议接近的证明和验证时间，大约25%的证明大小，而且是非交互式的。也就是说，ZKBoo 和 zk-SNARKs 一样，不必要证明方和验证方同时在线。

最近，zk-SNARKs 的主要研究者 Eli Ben-Sasson 也提出了另一个具有竞争力的零知识证明协议，但目前只有一些视频、海报、博客文章等资料[9,10]，还没有论文公开。笔者将持续关注这一工作。

到目前为止，具有应用前景的零知识证明工具可以分为两类，一类证明慢、验证快、证明体积小，另一类证明快、验证快、证明体积大。第一类由于验证快，不占用空间的特点，得到了区块链开发者的青睐，随着Zcash而闻名，其代表协议 zk-SNARKs 还有社区开发的 C++ 库。第二类证明快的特点使得其在移动设备，嵌入式设备的部署成为可能，而隔离见证等技术有望缓解其证明体积较大的问题，在区块链领域的也是前途无量。

第二类与第一类相比，存在另一个明显的优势，第一类协议中，在零知识证明协议部署前，需要一台机器生成一些初始参数，这些参数将在每一次证明与验证中被用到。参数生成后，参数生成算法运行中使用的所有数据必须销毁，否则整个协议将不安全。协议的安全性依赖于一台机器的数据销毁，那么最简单粗暴的想法就是在所有人的见证下毁掉这台机器。当然，也有一些多方安全计算的算法[7]，由多方控制的多台机器共同生成初始参数，除非所有人串通，才能危及协议的安全性，只要有一方销毁了全部数据，协议就是安全的。但无论如何，将整个协议的安全建立在几台执行初始化的机器上，与区块链的去中心化初衷总是不太相符。而第二类零知识证明协议不依赖于参数生成算法的安全性，自然没有这类问题。在未来，这两类协议可能在不同的应用需求下有各自的地位。

**随着理论研究的突破与应用场景的结合，零知识证明工具可以为区块链上的数据安全提供高效有力的保护，使隐私问题不再成为区块链发展的一个束缚。**

【参考：https://zhuanlan.zhihu.com/p/31651393】